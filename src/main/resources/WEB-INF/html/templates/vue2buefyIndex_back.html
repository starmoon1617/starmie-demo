<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-store, must-revalidate" />
    <title>Starmie Demo</title>
    <link th:href="@{/static/@mdi/font/css/materialdesignicons.css}" href="/static/@mdi/font/css/materialdesignicons.css" rel="stylesheet" type="text/css" />
    <link th:href="@{/static/css/vue2/buefy.min.css}" href="/static/css/vue2/vuetify.min.css" rel="stylesheet" type="text/css" />
    <script type="importmap">
        {"imports": {
            "vue": "[[@{/static/js/vue2esm/vue.esm.browser.js}]]",
            "vue-router" : "[[@{/static/js/vue2esm/vue-router.esm.browser.js}]]",
            "axios" : "[[@{/static/js/esm/axios.min.js}]]",
            "buefy" : "[[@{/static/js/vue2esm/buefy.esm.js}]]",
            "vue2-sfc-loader" : "[[@{/static/js/vue2esm/vue2-sfc-loader.esm.js}]]"
            }
        }
    </script>
</head>

<body>
    <div id="app">
        <!-- nav bar -->
        <b-navbar></b-navbar>
        <!-- menu -->
        <b-menu>
            <b-menu-list>
                <b-menu-item icon="account" label="My Account">
                    <b-menu-item label="Account data"></b-menu-item>
                    <b-menu-item label="Addresses"></b-menu-item>
                </b-menu-item>
            </b-menu-list>
        </b-menu>
        <!-- main view -->
        <router-view></router-view>
        <!-- footer -->
        <footer class="footer">
            <div class="pt-0"> Copyright (c) 2023, Starmoon1617 and/or Nathan Liao. All rights reserved. </div>
        </footer>
    </div>
    <script type="module">
        import {Vue, defineAsyncComponent} from 'vue';
        import Buefy from 'buefy';
        import * as VueRouter from 'vue-router';
        import {loadModule} from 'vue2-sfc-loader';

        Vue.use(Buefy);

        const options = {
            moduleCache: {
                vue: Vue,
                buefy: Buefy,
            },
            getFile(url) {
                return fetch(url).then(response => response.ok ? response.text() : Promise.reject(response));
            },
            addStyle(styleStr) {
                const style = document.createElement('style');
                style.textContent = styleStr;
                const ref = document.head.getElementsByTagName('style')[0] || null;
                document.head.insertBefore(style, ref);
            },
            log(type, ...args) {
                console.log(type, ...args);
            }
        }

        const routes = [
            {path: '/user', component: defineAsyncComponent(() => loadModule('[[@{/user/toList.vue}]]'))},
            {path: '/menu', component: defineAsyncComponent(() => loadModule('[[@{/navigation_menu/toList.vue}]]'))},
        ]
            //
        const router = VueRouter.createRouter({
            history: VueRouter.createWebHashHistory(),
            routes,
        })
        const app = new Vue({
            el: '#app',
            router,
        });
    </script>
</body>

</html>